(function(){"use strict";var e={778:function(e,t,l){var a=l(751),i=l(641);const s={class:"app-container"},o={class:"main-content"};function n(e,t,l,a,n,r){const c=(0,i.g2)("header-component"),d=(0,i.g2)("router-view"),u=(0,i.g2)("footer-component");return(0,i.uX)(),(0,i.CE)("div",s,[(0,i.bF)(c),(0,i.Lk)("div",o,[(0,i.bF)(d)]),(0,i.bF)(u)])}const r={class:"header"},c={class:"header-container"},d={class:"logo-section"},u={class:"logo"},p=["src"],m={class:"navigation"},g={class:"nav-list"},h={class:"nav-item"},k={class:"nav-item"},b={class:"nav-item"},f={class:"nav-item"},v={class:"nav-item"};function w(e,t,l,a,s,o){const n=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("header",r,[(0,i.Lk)("div",c,[(0,i.Lk)("div",d,[(0,i.bF)(n,{to:"/",class:"logo-link"},{default:(0,i.k6)(()=>[(0,i.Lk)("div",u,[(0,i.Lk)("img",{src:s.logoImage,alt:"在线工具",class:"logo-img"},null,8,p),t[0]||(t[0]=(0,i.Lk)("span",{class:"logo-text"},"在线工具",-1))])]),_:1})]),(0,i.Lk)("nav",m,[(0,i.Lk)("ul",g,[(0,i.Lk)("li",h,[(0,i.bF)(n,{to:"/image-compression",class:"nav-link"},{default:(0,i.k6)(()=>t[1]||(t[1]=[(0,i.eW)("图片压缩")])),_:1,__:[1]})]),(0,i.Lk)("li",k,[(0,i.bF)(n,{to:"/image-watermark",class:"nav-link"},{default:(0,i.k6)(()=>t[2]||(t[2]=[(0,i.eW)("图片水印")])),_:1,__:[2]})]),(0,i.Lk)("li",b,[(0,i.bF)(n,{to:"/image-cropping",class:"nav-link"},{default:(0,i.k6)(()=>t[3]||(t[3]=[(0,i.eW)("图片剪裁")])),_:1,__:[3]})]),(0,i.Lk)("li",f,[(0,i.bF)(n,{to:"/image-conversion",class:"nav-link"},{default:(0,i.k6)(()=>t[4]||(t[4]=[(0,i.eW)("图片格式转换")])),_:1,__:[4]})]),(0,i.Lk)("li",v,[(0,i.bF)(n,{to:"/file-conversion",class:"nav-link"},{default:(0,i.k6)(()=>t[5]||(t[5]=[(0,i.eW)("文件转换")])),_:1,__:[5]})])])])])])}const _="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGNpcmNsZSBjeD0iMTAwIiBjeT0iMTAwIiByPSI5MCIgZmlsbD0iI2ZiNzI5OSIvPgogIDxwYXRoIGQ9Ik01MCA4MEwxMDAgMTMwTDE1MCA4MCIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIxMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CiAgPHBhdGggZD0iTTgwIDYwTDEyMCA2MCIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIxMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+CiAgPHBhdGggZD0iTTYwIDEwMEw2MCAxNDAiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMTIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgogIDxwYXRoIGQ9Ik0xNDAgMTAwTDE0MCAxNDAiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMTIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgogIDxwYXRoIGQ9Ik04MCAxNDBMMTIwIDE0MCIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIxMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+Cjwvc3ZnPg==",L={compression:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDgwMCA0MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHJlY3Qgd2lkdGg9IjgwMCIgaGVpZ2h0PSI0MDAiIGZpbGw9IiMyQzNFNTAiLz4KICA8dGV4dCB4PSI0MDAiIHk9IjIwMCIgZm9udC1zaXplPSI0OCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgZmlsbD0id2hpdGUiPuWbvueJh+WOi+e8qTwvdGV4dD4KPC9zdmc+",watermark:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDgwMCA0MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHJlY3Qgd2lkdGg9IjgwMCIgaGVpZ2h0PSI0MDAiIGZpbGw9IiNGQjcyOTkiLz4KICA8dGV4dCB4PSI0MDAiIHk9IjIwMCIgZm9udC1zaXplPSI0OCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgZmlsbD0id2hpdGUiPuWbvueJh+awtOWNsDwvdGV4dD4KPC9zdmc+",cropping:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDgwMCA0MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjgwMCIgaGVpZ2h0PSI0MDAiIGZpbGw9IiMwMEExRDYiLz48dGV4dCB4PSI0MDAiIHk9IjIwMCIgZm9udC1zaXplPSI0OCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgZmlsbD0id2hpdGUiPuWbvueJh+WJquijgTwvdGV4dD48L3N2Zz4=",conversion:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDgwMCA0MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHJlY3Qgd2lkdGg9IjgwMCIgaGVpZ2h0PSI0MDAiIGZpbGw9IiM2NkJCNkEiLz4KICA8dGV4dCB4PSI0MDAiIHk9IjIwMCIgZm9udC1zaXplPSI0OCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgZmlsbD0id2hpdGUiPuWbvueJh+agvOW8j+i9rOaNojwvdGV4dD4KPC9zdmc+",fileConversion:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDgwMCA0MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHJlY3Qgd2lkdGg9IjgwMCIgaGVpZ2h0PSI0MDAiIGZpbGw9IiM5QzI3QjAiLz4KICA8dGV4dCB4PSI0MDAiIHk9IjIwMCIgZm9udC1zaXplPSI0OCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgZmlsbD0id2hpdGUiPuaWh+S7tuagvOW8j+i9rOaNojwvdGV4dD4KPC9zdmc+"};var I={name:"HeaderComponent",data(){return{logoImage:_}}},F=l(262);const C=(0,F.A)(I,[["render",w],["__scopeId","data-v-7acf249a"]]);var y=C,S=l(33);const U={class:"footer"},P={class:"footer-container"},W={class:"footer-bottom"};function x(e,t,l,a,s,o){return(0,i.uX)(),(0,i.CE)("footer",U,[(0,i.Lk)("div",P,[t[0]||(t[0]=(0,i.Fv)('<div class="footer-content" data-v-1d5db2c2><div class="footer-column" data-v-1d5db2c2><h3 data-v-1d5db2c2>联系我们</h3><p data-v-1d5db2c2>邮箱: 1258065064@qq.com</p><p data-v-1d5db2c2>微信: 17863416665</p><div class="social-icons" data-v-1d5db2c2><a href="#" class="social-icon" data-v-1d5db2c2><i class="el-icon-s-platform" data-v-1d5db2c2></i></a><a href="#" class="social-icon" data-v-1d5db2c2><i class="el-icon-s-custom" data-v-1d5db2c2></i></a><a href="#" class="social-icon" data-v-1d5db2c2><i class="el-icon-s-promotion" data-v-1d5db2c2></i></a></div></div></div>',1)),(0,i.Lk)("div",W,[(0,i.Lk)("p",null,"© "+(0,S.v_)(o.currentYear)+" 在线工具 - 提供免费在线工具服务",1)])])])}var R={name:"FooterComponent",computed:{currentYear(){return(new Date).getFullYear()}}};const M=(0,F.A)(R,[["render",x],["__scopeId","data-v-1d5db2c2"]]);var G=M,Z={name:"App",components:{HeaderComponent:y,FooterComponent:G}};const D=(0,F.A)(Z,[["render",n]]);var O=D,A=l(220);const V={class:"home-page"},z={class:"banner-section"},$={class:"banner-content"},N={class:"feature-section"},X={class:"feature-grid"},E=["onClick"],T={class:"feature-icon"},H={class:"steps-section"};function Q(e,t,l,a,s,o){const n=(0,i.g2)("el-button"),r=(0,i.g2)("el-carousel-item"),c=(0,i.g2)("el-carousel"),d=(0,i.g2)("el-step"),u=(0,i.g2)("el-steps");return(0,i.uX)(),(0,i.CE)("div",V,[(0,i.Lk)("div",z,[(0,i.bF)(c,{height:"400px",interval:5e3,arrow:"always"},{default:(0,i.k6)(()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.bannerItems,(e,l)=>((0,i.uX)(),(0,i.Wv)(r,{key:l},{default:(0,i.k6)(()=>[(0,i.Lk)("div",{class:"banner-item",style:(0,S.Tr)({backgroundImage:`url(${e.image})`})},[(0,i.Lk)("div",$,[(0,i.Lk)("h2",null,(0,S.v_)(e.title),1),(0,i.Lk)("p",null,(0,S.v_)(e.description),1),(0,i.bF)(n,{type:"primary",size:"large",onClick:t=>o.navigateTo(e.link)},{default:(0,i.k6)(()=>t[0]||(t[0]=[(0,i.eW)("立即使用")])),_:2,__:[0]},1032,["onClick"])])],4)]),_:2},1024))),128))]),_:1})]),(0,i.Lk)("div",N,[t[1]||(t[1]=(0,i.Lk)("h2",{class:"section-title"},"热门功能",-1)),(0,i.Lk)("div",X,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.features,(e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"feature-card",onClick:t=>o.navigateTo(e.link)},[(0,i.Lk)("div",T,[(0,i.Lk)("i",{class:(0,S.C4)(e.icon)},null,2)]),(0,i.Lk)("h3",null,(0,S.v_)(e.title),1),(0,i.Lk)("p",null,(0,S.v_)(e.description),1)],8,E))),128))])]),(0,i.Lk)("div",H,[t[2]||(t[2]=(0,i.Lk)("h2",{class:"section-title"},"如何使用",-1)),(0,i.bF)(u,{active:3,"finish-status":"success",simple:""},{default:(0,i.k6)(()=>[(0,i.bF)(d,{title:"选择工具",description:"从导航栏选择您需要的在线工具"}),(0,i.bF)(d,{title:"上传文件",description:"通过拖拽或浏览器上传您的文件"}),(0,i.bF)(d,{title:"处理并下载",description:"等待处理完成后下载结果文件"})]),_:1})])])}var B={name:"HomePage",data(){return{bannerItems:[{title:"免费图片压缩工具",description:"轻松压缩您的图片，保持高质量的同时减小文件大小",image:L.compression,link:"/image-compression"},{title:"专业图片水印工具",description:"快速为您的图片添加文字或图片水印，保护您的知识产权",image:L.watermark,link:"/image-watermark"},{title:"高效图片剪裁工具",description:"轻松剪裁您的图片，生成各种社交媒体所需的尺寸",image:L.cropping,link:"/image-cropping"},{title:"图片格式转换工具",description:"快速转换图片格式，支持JPG、PNG、WebP、GIF等格式互转",image:L.conversion,link:"/image-conversion"},{title:"文件格式转换工具",description:"便捷转换各种文档格式，满足不同场景的需求",image:L.fileConversion,link:"/file-conversion"}],features:[{title:"图片压缩",description:"智能压缩图片，最高可减小70%的体积",icon:"el-icon-picture",link:"/image-compression"},{title:"图片水印",description:"添加专业的文字或图片水印",icon:"el-icon-edit",link:"/image-watermark"},{title:"图片剪裁",description:"精确剪裁图片到所需尺寸",icon:"el-icon-crop",link:"/image-cropping"},{title:"图片格式转换",description:"轻松转换PNG、JPG、WebP等格式",icon:"el-icon-refresh",link:"/image-conversion"},{title:"文件转换",description:"多种文件格式互相转换",icon:"el-icon-document",link:"/file-conversion"}]}},methods:{navigateTo(e){this.$router.push(e)}}};const j=(0,F.A)(B,[["render",Q],["__scopeId","data-v-4e433352"]]);var J=j;const q={class:"tool-page bilibili-style"},Y={class:"tool-container"},K={class:"upload-section"},ee={class:"settings-section"},te={class:"action-buttons"},le={key:0,class:"result-section"},ae={class:"image-preview"},ie=["src"],se={class:"image-preview"},oe=["src"],ne={class:"batch-actions"},re={class:"tool-faq"};function ce(e,t,l,a,s,o){const n=(0,i.g2)("el-upload"),r=(0,i.g2)("el-slider"),c=(0,i.g2)("el-form-item"),d=(0,i.g2)("el-radio"),u=(0,i.g2)("el-radio-group"),p=(0,i.g2)("el-switch"),m=(0,i.g2)("el-input-number"),g=(0,i.g2)("el-form"),h=(0,i.g2)("el-button"),k=(0,i.g2)("el-table-column"),b=(0,i.g2)("el-table"),f=(0,i.g2)("el-collapse-item"),v=(0,i.g2)("el-collapse");return(0,i.uX)(),(0,i.CE)("div",q,[t[21]||(t[21]=(0,i.Lk)("div",{class:"tool-header"},[(0,i.Lk)("h1",null,"图片压缩"),(0,i.Lk)("p",null,"压缩您的图片，减小文件大小，同时保持良好的图片质量")],-1)),(0,i.Lk)("div",Y,[(0,i.Lk)("div",K,[(0,i.bF)(n,{class:"upload-area",drag:"",action:null,"http-request":o.customUpload,multiple:"","on-remove":o.handleRemove,"before-upload":o.beforeUpload,"on-change":o.handleFileChange,"file-list":s.fileList,"auto-upload":!1},{default:(0,i.k6)(()=>t[5]||(t[5]=[(0,i.Lk)("i",{class:"el-icon-upload"},null,-1),(0,i.Lk)("div",{class:"el-upload__text"},[(0,i.eW)("拖拽图片到此处，或 "),(0,i.Lk)("em",null,"点击上传")],-1),(0,i.Lk)("div",{class:"el-upload__tip",slot:"tip"}," 支持JPG、PNG、WebP格式，单个文件不超过10MB ",-1)])),_:1,__:[5]},8,["http-request","on-remove","before-upload","on-change","file-list"])]),(0,i.Lk)("div",ee,[t[11]||(t[11]=(0,i.Lk)("h2",null,"压缩设置",-1)),(0,i.bF)(g,{"label-position":"top",model:s.compressionSettings},{default:(0,i.k6)(()=>[(0,i.bF)(c,{label:"压缩质量"},{default:(0,i.k6)(()=>[(0,i.bF)(r,{modelValue:s.compressionSettings.quality,"onUpdate:modelValue":t[0]||(t[0]=e=>s.compressionSettings.quality=e),min:0,max:100,"format-tooltip":o.formatQuality},null,8,["modelValue","format-tooltip"])]),_:1}),(0,i.bF)(c,{label:"压缩方式"},{default:(0,i.k6)(()=>[(0,i.bF)(u,{modelValue:s.compressionSettings.mode,"onUpdate:modelValue":t[1]||(t[1]=e=>s.compressionSettings.mode=e)},{default:(0,i.k6)(()=>[(0,i.bF)(d,{label:"lossy"},{default:(0,i.k6)(()=>t[6]||(t[6]=[(0,i.eW)("有损压缩 (更小体积)")])),_:1,__:[6]}),(0,i.bF)(d,{label:"lossless"},{default:(0,i.k6)(()=>t[7]||(t[7]=[(0,i.eW)("无损压缩 (更好质量)")])),_:1,__:[7]})]),_:1},8,["modelValue"])]),_:1}),(0,i.bF)(c,{label:"保持原始尺寸"},{default:(0,i.k6)(()=>[(0,i.bF)(p,{modelValue:s.compressionSettings.keepOriginalSize,"onUpdate:modelValue":t[2]||(t[2]=e=>s.compressionSettings.keepOriginalSize=e)},null,8,["modelValue"])]),_:1}),s.compressionSettings.keepOriginalSize?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(c,{key:0,label:"调整尺寸"},{default:(0,i.k6)(()=>[(0,i.bF)(m,{modelValue:s.compressionSettings.width,"onUpdate:modelValue":t[3]||(t[3]=e=>s.compressionSettings.width=e),min:1,max:1e4,label:"宽度"},null,8,["modelValue"]),t[8]||(t[8]=(0,i.Lk)("span",{class:"dimension-separator"},"x",-1)),(0,i.bF)(m,{modelValue:s.compressionSettings.height,"onUpdate:modelValue":t[4]||(t[4]=e=>s.compressionSettings.height=e),min:1,max:1e4,label:"高度"},null,8,["modelValue"])]),_:1,__:[8]}))]),_:1},8,["model"]),(0,i.Lk)("div",te,[(0,i.bF)(h,{type:"primary",onClick:o.startCompression,disabled:0===s.fileList.length},{default:(0,i.k6)(()=>t[9]||(t[9]=[(0,i.eW)(" 开始压缩 ")])),_:1,__:[9]},8,["onClick","disabled"]),(0,i.bF)(h,{onClick:o.resetSettings},{default:(0,i.k6)(()=>t[10]||(t[10]=[(0,i.eW)("重置设置")])),_:1,__:[10]},8,["onClick"])])]),s.compressionResults.length>0?((0,i.uX)(),(0,i.CE)("div",le,[t[16]||(t[16]=(0,i.Lk)("h2",null,"压缩结果",-1)),(0,i.bF)(b,{data:s.compressionResults,style:{width:"100%"}},{default:(0,i.k6)(()=>[(0,i.bF)(k,{label:"原图预览"},{default:(0,i.k6)(e=>[(0,i.Lk)("div",ae,[(0,i.Lk)("img",{src:e.row.originalUrl,alt:"原图预览"},null,8,ie)])]),_:1}),(0,i.bF)(k,{label:"压缩后预览"},{default:(0,i.k6)(e=>[(0,i.Lk)("div",se,[(0,i.Lk)("img",{src:e.row.compressedUrl,alt:"压缩后预览"},null,8,oe)])]),_:1}),(0,i.bF)(k,{prop:"fileName",label:"文件名"}),(0,i.bF)(k,{prop:"originalSize",label:"原始大小"}),(0,i.bF)(k,{prop:"compressedSize",label:"压缩后大小"}),(0,i.bF)(k,{prop:"savingPercent",label:"节省比例"}),(0,i.bF)(k,{label:"操作"},{default:(0,i.k6)(e=>[(0,i.bF)(h,{type:"primary",size:"small",onClick:t=>o.downloadImage(e.row)},{default:(0,i.k6)(()=>t[12]||(t[12]=[(0,i.eW)(" 下载 ")])),_:2,__:[12]},1032,["onClick"]),(0,i.bF)(h,{type:"danger",size:"small",onClick:t=>o.deleteResult(e.$index)},{default:(0,i.k6)(()=>t[13]||(t[13]=[(0,i.eW)(" 删除 ")])),_:2,__:[13]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),(0,i.Lk)("div",ne,[(0,i.bF)(h,{type:"success",onClick:o.downloadAll},{default:(0,i.k6)(()=>t[14]||(t[14]=[(0,i.eW)("下载全部")])),_:1,__:[14]},8,["onClick"]),(0,i.bF)(h,{type:"danger",onClick:o.clearResults},{default:(0,i.k6)(()=>t[15]||(t[15]=[(0,i.eW)("清空结果")])),_:1,__:[15]},8,["onClick"])])])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",re,[t[20]||(t[20]=(0,i.Lk)("h2",null,"常见问题",-1)),(0,i.bF)(v,null,{default:(0,i.k6)(()=>[(0,i.bF)(f,{title:"什么是图片压缩？",name:"1"},{default:(0,i.k6)(()=>t[17]||(t[17]=[(0,i.Lk)("p",null," 图片压缩是一种减小图片文件大小的过程，同时尽量保持图片的视觉质量。这对于优化网页加载速度、节省存储空间和减少网络流量非常有用。 ",-1)])),_:1,__:[17]}),(0,i.bF)(f,{title:"有损压缩和无损压缩的区别是什么？",name:"2"},{default:(0,i.k6)(()=>t[18]||(t[18]=[(0,i.Lk)("p",null," 有损压缩会永久删除一些图片数据，通常可以实现较高的压缩率，但可能会降低图片质量。无损压缩保留所有原始数据，图片质量不会下降，但压缩率通常较低。 ",-1)])),_:1,__:[18]}),(0,i.bF)(f,{title:"压缩会影响我的图片质量吗？",name:"3"},{default:(0,i.k6)(()=>t[19]||(t[19]=[(0,i.Lk)("p",null," 这取决于您选择的压缩设置。高质量设置下的有损压缩通常很难与原图区分，而低质量设置可能会导致可见的质量下降。无损压缩不会影响图片质量。 ",-1)])),_:1,__:[19]})]),_:1})])])}var de=axios,ue=l.n(de),pe={name:"ImageCompression",data(){return{fileList:[],compressionSettings:{quality:80,mode:"lossy",keepOriginalSize:!0,width:800,height:600},compressionResults:[],isProcessing:!1}},methods:{formatQuality(e){return e+"%"},handleRemove(e,t){this.fileList=t},handleFileChange(e,t){this.fileList=t},beforeUpload(e){const t=-1!==e.type.indexOf("image/"),l=e.size/1024/1024<10;return t?!!l||(this.$message.error("图片大小不能超过 10MB!"),!1):(this.$message.error("只能上传图片文件!"),!1)},customUpload({file:e,onSuccess:t,onError:l}){const a=new FormData;a.append("image",e),a.append("quality",this.compressionSettings.quality),this.compressionSettings.keepOriginalSize||(a.append("width",this.compressionSettings.width),a.append("height",this.compressionSettings.height)),ue().post("/api/image/compress",a,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>{if(a.data.success){const l={fileName:e.name,originalUrl:URL.createObjectURL(e),compressedUrl:a.data.url,originalSize:this.formatFileSize(e.size),compressedSize:this.formatFileSize(a.data.compressedSize),savingPercent:a.data.savingPercent+"%",downloadUrl:a.data.url};this.compressionResults.push(l),t(a.data),this.$message.success("压缩成功!")}else l(new Error("压缩失败")),this.$message.error("压缩失败: "+a.data.message)}).catch(e=>{l(e),this.$message.error("压缩失败: "+e.message)}).finally(()=>{this.isProcessing=!1})},startCompression(){if(0===this.fileList.length)return void this.$message.warning("请先上传图片");this.isProcessing=!0,this.$message.info("开始处理图片...");const e=this.fileList.map(e=>new Promise((t,l)=>{this.customUpload({file:e.raw,onSuccess:t,onError:l})}));Promise.all(e).then(()=>{this.$message.success("所有图片压缩完成!")}).catch(e=>{console.error("压缩过程中出错:",e),this.$message.error("部分图片压缩失败")}).finally(()=>{this.isProcessing=!1,this.fileList=[]})},resetSettings(){this.compressionSettings={quality:80,mode:"lossy",keepOriginalSize:!0,width:800,height:600}},downloadImage(e){const t=document.createElement("a");t.href=e.downloadUrl,t.download="compressed_"+e.fileName,t.click()},deleteResult(e){this.compressionResults.splice(e,1)},downloadAll(){0!==this.compressionResults.length?(this.compressionResults.forEach(e=>{this.downloadImage(e)}),this.$message.success("开始下载所有图片")):this.$message.warning("没有可下载的结果")},clearResults(){this.compressionResults=[]},formatFileSize(e){if(0===e)return"0 B";const t=1024,l=["B","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(2))+" "+l[a]}}};const me=(0,F.A)(pe,[["render",ce],["__scopeId","data-v-cb29f8dc"]]);var ge=me;const he={class:"tool-page bilibili-style"},ke={class:"tool-container"},be={class:"upload-section"},fe={key:0,class:"preview-section"},ve={class:"preview-container"},we={class:"preview-image",ref:"previewContainer"},_e=["src"],Le=["src"],Ie={key:1,class:"settings-section"},Fe={class:"setting-group"},Ce={class:"setting-group"},ye={key:0},Se={class:"setting-group"},Ue={class:"setting-group"},Pe={class:"setting-group"},We={class:"setting-group"},xe={key:1},Re={class:"setting-group"},Me={key:0,class:"watermark-image-preview"},Ge=["src"],Ze={class:"setting-group"},De={class:"setting-group"},Oe={key:2,class:"setting-group"},Ae={class:"action-buttons"},Ve={key:2,class:"result-section"},ze={class:"result-container"},$e={class:"result-image"},Ne=["src"],Xe={class:"result-actions"};function Ee(e,t,l,a,s,o){const n=(0,i.g2)("el-upload"),r=(0,i.g2)("el-radio"),c=(0,i.g2)("el-radio-group"),d=(0,i.g2)("el-input"),u=(0,i.g2)("el-option"),p=(0,i.g2)("el-select"),m=(0,i.g2)("el-slider"),g=(0,i.g2)("el-color-picker"),h=(0,i.g2)("el-button");return(0,i.uX)(),(0,i.CE)("div",he,[t[36]||(t[36]=(0,i.Lk)("div",{class:"tool-header"},[(0,i.Lk)("h1",null,"图片水印"),(0,i.Lk)("p",null,"为您的图片添加文字或图片水印，保护您的知识产权")],-1)),(0,i.Lk)("div",ke,[(0,i.Lk)("div",be,[(0,i.bF)(n,{class:"upload-area",drag:"",action:null,"http-request":o.handleImageUpload,"before-upload":o.beforeUpload,"on-change":o.handleFileChange,"auto-upload":!1,"file-list":s.fileList,"on-remove":o.handleRemove},{default:(0,i.k6)(()=>t[10]||(t[10]=[(0,i.Lk)("i",{class:"el-icon-upload"},null,-1),(0,i.Lk)("div",{class:"el-upload__text"},[(0,i.eW)("拖拽图片到此区域，或 "),(0,i.Lk)("em",null,"点击上传")],-1),(0,i.Lk)("div",{class:"el-upload__tip",slot:"tip"}," 支持JPG、PNG、WebP格式，单个文件不超过10MB ",-1)])),_:1,__:[10]},8,["http-request","before-upload","on-change","file-list","on-remove"])]),s.imageUrl?((0,i.uX)(),(0,i.CE)("div",fe,[t[11]||(t[11]=(0,i.Lk)("h2",null,"水印预览",-1)),(0,i.Lk)("div",ve,[(0,i.Lk)("div",we,[(0,i.Lk)("img",{src:s.imageUrl,ref:"previewImage",alt:"图片预览"},null,8,_e),"text"===s.watermarkSettings.type?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"watermark-preview",style:(0,S.Tr)(o.watermarkPreviewStyle)},(0,S.v_)(s.watermarkSettings.text),5)):"image"===s.watermarkSettings.type&&s.watermarkImageUrl?((0,i.uX)(),(0,i.CE)("div",{key:1,class:"watermark-preview",style:(0,S.Tr)(o.watermarkImageStyle)},[(0,i.Lk)("img",{src:s.watermarkImageUrl,alt:"水印图片"},null,8,Le)],4)):(0,i.Q3)("",!0)],512)])])):(0,i.Q3)("",!0),s.imageUrl?((0,i.uX)(),(0,i.CE)("div",Ie,[t[32]||(t[32]=(0,i.Lk)("h2",null,"水印设置",-1)),(0,i.Lk)("div",Fe,[t[14]||(t[14]=(0,i.Lk)("label",null,"水印类型",-1)),(0,i.bF)(c,{modelValue:s.watermarkSettings.type,"onUpdate:modelValue":t[0]||(t[0]=e=>s.watermarkSettings.type=e)},{default:(0,i.k6)(()=>[(0,i.bF)(r,{label:"text"},{default:(0,i.k6)(()=>t[12]||(t[12]=[(0,i.eW)("文字水印")])),_:1,__:[12]}),(0,i.bF)(r,{label:"image"},{default:(0,i.k6)(()=>t[13]||(t[13]=[(0,i.eW)("图片水印")])),_:1,__:[13]})]),_:1},8,["modelValue"])]),(0,i.Lk)("div",Ce,[t[19]||(t[19]=(0,i.Lk)("label",null,"水印位置",-1)),(0,i.bF)(c,{modelValue:s.watermarkSettings.position,"onUpdate:modelValue":t[1]||(t[1]=e=>s.watermarkSettings.position=e)},{default:(0,i.k6)(()=>[(0,i.bF)(r,{label:"topLeft"},{default:(0,i.k6)(()=>t[15]||(t[15]=[(0,i.eW)("左上角")])),_:1,__:[15]}),(0,i.bF)(r,{label:"center"},{default:(0,i.k6)(()=>t[16]||(t[16]=[(0,i.eW)("中心")])),_:1,__:[16]}),(0,i.bF)(r,{label:"bottomRight"},{default:(0,i.k6)(()=>t[17]||(t[17]=[(0,i.eW)("右下角")])),_:1,__:[17]}),(0,i.bF)(r,{label:"custom"},{default:(0,i.k6)(()=>t[18]||(t[18]=[(0,i.eW)("自定义位置")])),_:1,__:[18]})]),_:1},8,["modelValue"])]),"text"===s.watermarkSettings.type?((0,i.uX)(),(0,i.CE)("div",ye,[(0,i.Lk)("div",Se,[t[20]||(t[20]=(0,i.Lk)("label",null,"水印文字",-1)),(0,i.bF)(d,{modelValue:s.watermarkSettings.text,"onUpdate:modelValue":t[2]||(t[2]=e=>s.watermarkSettings.text=e),placeholder:"请输入水印文字"},null,8,["modelValue"])]),(0,i.Lk)("div",Ue,[t[21]||(t[21]=(0,i.Lk)("label",null,"字体选择",-1)),(0,i.bF)(p,{modelValue:s.watermarkSettings.fontFamily,"onUpdate:modelValue":t[3]||(t[3]=e=>s.watermarkSettings.fontFamily=e)},{default:(0,i.k6)(()=>[(0,i.bF)(u,{label:"默认",value:"Arial"}),(0,i.bF)(u,{label:"黑体",value:"SimHei"}),(0,i.bF)(u,{label:"楷体",value:"KaiTi"}),(0,i.bF)(u,{label:"宋体",value:"SimSun"})]),_:1},8,["modelValue"])]),(0,i.Lk)("div",Pe,[t[22]||(t[22]=(0,i.Lk)("label",null,"字体大小",-1)),(0,i.bF)(m,{modelValue:s.watermarkSettings.fontSize,"onUpdate:modelValue":t[4]||(t[4]=e=>s.watermarkSettings.fontSize=e),min:10,max:72,"show-input":""},null,8,["modelValue"])]),(0,i.Lk)("div",We,[t[23]||(t[23]=(0,i.Lk)("label",null,"文字颜色",-1)),(0,i.bF)(g,{modelValue:s.watermarkSettings.color,"onUpdate:modelValue":t[5]||(t[5]=e=>s.watermarkSettings.color=e)},null,8,["modelValue"])])])):(0,i.Q3)("",!0),"image"===s.watermarkSettings.type?((0,i.uX)(),(0,i.CE)("div",xe,[(0,i.Lk)("div",Re,[t[25]||(t[25]=(0,i.Lk)("label",null,"上传水印图片",-1)),(0,i.bF)(n,{class:"watermark-image-upload",action:null,"http-request":o.handleWatermarkImageUpload,"before-upload":o.beforeWatermarkImageUpload,"show-file-list":!1,accept:"image/*"},{default:(0,i.k6)(()=>[(0,i.bF)(h,{type:"primary"},{default:(0,i.k6)(()=>t[24]||(t[24]=[(0,i.eW)("选择水印图片")])),_:1,__:[24]})]),_:1},8,["http-request","before-upload"]),s.watermarkImageUrl?((0,i.uX)(),(0,i.CE)("div",Me,[(0,i.Lk)("img",{src:s.watermarkImageUrl,alt:"水印图片预览"},null,8,Ge)])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Ze,[t[26]||(t[26]=(0,i.Lk)("label",null,"水印图片大小",-1)),(0,i.bF)(m,{modelValue:s.watermarkSettings.imageSize,"onUpdate:modelValue":t[6]||(t[6]=e=>s.watermarkSettings.imageSize=e),min:10,max:100,"show-input":""},null,8,["modelValue"])])])):(0,i.Q3)("",!0),(0,i.Lk)("div",De,[t[27]||(t[27]=(0,i.Lk)("label",null,"透明度",-1)),(0,i.bF)(m,{modelValue:s.watermarkSettings.opacity,"onUpdate:modelValue":t[7]||(t[7]=e=>s.watermarkSettings.opacity=e),min:0,max:100,"format-tooltip":o.formatOpacity,"show-input":""},null,8,["modelValue","format-tooltip"])]),"custom"===s.watermarkSettings.position?((0,i.uX)(),(0,i.CE)("div",Oe,[t[28]||(t[28]=(0,i.Lk)("label",null,"水平位置",-1)),(0,i.bF)(m,{modelValue:s.watermarkSettings.posX,"onUpdate:modelValue":t[8]||(t[8]=e=>s.watermarkSettings.posX=e),min:0,max:100,"show-input":""},null,8,["modelValue"]),t[29]||(t[29]=(0,i.Lk)("label",null,"垂直位置",-1)),(0,i.bF)(m,{modelValue:s.watermarkSettings.posY,"onUpdate:modelValue":t[9]||(t[9]=e=>s.watermarkSettings.posY=e),min:0,max:100,"show-input":""},null,8,["modelValue"])])):(0,i.Q3)("",!0),(0,i.Lk)("div",Ae,[(0,i.bF)(h,{type:"primary",onClick:o.applyWatermark,loading:s.isProcessing,disabled:!s.imageUrl},{default:(0,i.k6)(()=>t[30]||(t[30]=[(0,i.eW)("应用水印")])),_:1,__:[30]},8,["onClick","loading","disabled"]),(0,i.bF)(h,{onClick:o.resetSettings},{default:(0,i.k6)(()=>t[31]||(t[31]=[(0,i.eW)("重置设置")])),_:1,__:[31]},8,["onClick"])])])):(0,i.Q3)("",!0),s.resultUrl?((0,i.uX)(),(0,i.CE)("div",Ve,[t[35]||(t[35]=(0,i.Lk)("h2",null,"处理结果",-1)),(0,i.Lk)("div",ze,[(0,i.Lk)("div",$e,[(0,i.Lk)("img",{src:s.resultUrl,alt:"处理结果"},null,8,Ne)]),(0,i.Lk)("div",Xe,[(0,i.bF)(h,{type:"success",onClick:o.downloadResult},{default:(0,i.k6)(()=>t[33]||(t[33]=[(0,i.eW)("下载图片")])),_:1,__:[33]},8,["onClick"]),(0,i.bF)(h,{onClick:o.resetProcess},{default:(0,i.k6)(()=>t[34]||(t[34]=[(0,i.eW)("重新处理")])),_:1,__:[34]},8,["onClick"])])])])):(0,i.Q3)("",!0)])])}var Te={name:"ImageWatermark",data(){return{fileList:[],imageUrl:null,watermarkImageUrl:null,watermarkFile:null,watermarkSettings:{type:"text",position:"bottomRight",text:"© 版权所有",fontFamily:"Arial",fontSize:24,color:"#ffffff",opacity:50,imageSize:30,posX:50,posY:50},resultUrl:null,isProcessing:!1}},computed:{watermarkPreviewStyle(){const e=this.getPositionStyle();return{...e,fontFamily:this.watermarkSettings.fontFamily,fontSize:`${this.watermarkSettings.fontSize}px`,color:this.watermarkSettings.color,opacity:this.watermarkSettings.opacity/100}},watermarkImageStyle(){const e=this.getPositionStyle();return{...e,width:`${this.watermarkSettings.imageSize}%`,opacity:this.watermarkSettings.opacity/100}}},methods:{formatOpacity(e){return e+"%"},getPositionStyle(){let e={};switch(this.watermarkSettings.position){case"topLeft":e={top:"10px",left:"10px"};break;case"center":e={top:"50%",left:"50%",transform:"translate(-50%, -50%)"};break;case"bottomRight":e={bottom:"10px",right:"10px"};break;case"custom":e={top:`${this.watermarkSettings.posY}%`,left:`${this.watermarkSettings.posX}%`,transform:"translate(-50%, -50%)"};break}return e},handleFileChange(e){e&&e.raw&&(this.fileList=[e],this.imageUrl=URL.createObjectURL(e.raw),this.resultUrl=null)},handleRemove(){this.fileList=[],this.imageUrl=null,this.resultUrl=null},beforeUpload(e){const t=e.type.startsWith("image/"),l=e.size/1024/1024<10;return t?!!l||(this.$message.error("图片大小不能超过10MB!"),!1):(this.$message.error("只能上传图片文件!"),!1)},handleImageUpload({file:e}){this.imageUrl=URL.createObjectURL(e),this.resultUrl=null},beforeWatermarkImageUpload(e){const t=e.type.startsWith("image/"),l=e.size/1024/1024<2;return t?!!l||(this.$message.error("水印图片大小不能超过2MB!"),!1):(this.$message.error("只能上传图片文件!"),!1)},handleWatermarkImageUpload({file:e}){this.watermarkImageUrl=URL.createObjectURL(e),this.watermarkFile=e},resetSettings(){this.watermarkSettings={type:"text",position:"bottomRight",text:"© 版权所有",fontFamily:"Arial",fontSize:24,color:"#ffffff",opacity:50,imageSize:30,posX:50,posY:50}},applyWatermark(){if(!this.imageUrl||0===this.fileList.length)return void this.$message.warning("请先上传图片");if("text"===this.watermarkSettings.type&&!this.watermarkSettings.text.trim())return void this.$message.warning("请输入水印文字");if("image"===this.watermarkSettings.type&&!this.watermarkImageUrl)return void this.$message.warning("请上传水印图片");this.isProcessing=!0;const e=new FormData;e.append("image",this.fileList[0].raw),Object.keys(this.watermarkSettings).forEach(t=>{e.append(t,this.watermarkSettings[t])}),"image"===this.watermarkSettings.type&&this.watermarkFile&&e.append("watermarkImage",this.watermarkFile),window.axios.post("/api/image/watermark",e,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{e.data.success?(this.resultUrl=e.data.url,this.$message.success("水印添加成功!")):this.$message.error("水印添加失败: "+e.data.message)}).catch(e=>{console.error("添加水印失败:",e),this.$message.error("添加水印失败: "+(e.message||"未知错误"))}).finally(()=>{this.isProcessing=!1})},downloadResult(){if(!this.resultUrl)return void this.$message.warning("没有可下载的结果");const e=document.createElement("a");e.href=this.resultUrl,e.download="watermarked_image.jpg",e.click()},resetProcess(){this.resultUrl=null}}};const He=(0,F.A)(Te,[["render",Ee],["__scopeId","data-v-fba007a0"]]);var Qe=He;const Be={class:"tool-page bilibili-style"},je={class:"tool-container"},Je={key:0,class:"upload-section"},qe={key:1,class:"crop-container"},Ye={class:"cropper-wrap"},Ke={class:"crop-settings"},et={class:"setting-group"},tt={key:0,class:"setting-group"},lt={key:0,class:"ratio-preview"},at={class:"actions"},it={key:2,class:"result-section"},st={class:"result-container"},ot={class:"result-image"},nt=["src"],rt={class:"result-actions"};function ct(e,t,l,a,s,o){const n=(0,i.g2)("el-upload"),r=(0,i.g2)("vue-cropper"),c=(0,i.g2)("el-radio"),d=(0,i.g2)("el-radio-group"),u=(0,i.g2)("el-button");return(0,i.uX)(),(0,i.CE)("div",Be,[t[24]||(t[24]=(0,i.Lk)("div",{class:"tool-header"},[(0,i.Lk)("h1",null,"图片裁剪"),(0,i.Lk)("p",null,"精确裁剪您的图片，生成各种所需尺寸")],-1)),(0,i.Lk)("div",je,[s.imageUrl?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Je,[(0,i.bF)(n,{class:"upload-area",drag:"",action:"#","auto-upload":!1,"on-change":o.handleFileChange,"before-upload":o.beforeUpload,"file-list":s.fileList,limit:1},{tip:(0,i.k6)(()=>t[4]||(t[4]=[(0,i.Lk)("div",{class:"el-upload__tip"}," 支持JPG、PNG、WebP、GIF格式，单个文件不超过10MB ",-1)])),default:(0,i.k6)(()=>[t[5]||(t[5]=(0,i.Lk)("i",{class:"el-icon-upload"},null,-1)),t[6]||(t[6]=(0,i.Lk)("div",{class:"el-upload__text"},[(0,i.eW)("拖拽图片到此区域，或 "),(0,i.Lk)("em",null,"点击上传")],-1))]),_:1,__:[5,6]},8,["on-change","before-upload","file-list"])])),s.imageUrl?((0,i.uX)(),(0,i.CE)("div",qe,[t[20]||(t[20]=(0,i.Lk)("h2",null,"图片裁剪预览",-1)),(0,i.Lk)("div",Ye,[(0,i.bF)(r,{ref:"cropper",img:s.imageUrl,outputSize:1,outputType:s.cropOptions.outputType,info:!0,full:!1,canMove:!0,canMoveBox:!1,original:!1,autoCrop:!0,autoCropWidth:s.cropOptions.autoCropWidth,autoCropHeight:s.cropOptions.autoCropHeight,fixedBox:!1,fixed:s.cropOptions.fixed,fixedNumber:s.cropOptions.fixedNumber,centerBox:!0,infoTrue:!0,mode:s.cropOptions.mode,round:s.cropOptions.round,onRealTime:o.realTime},null,8,["img","outputType","autoCropWidth","autoCropHeight","fixed","fixedNumber","mode","round","onRealTime"])]),(0,i.Lk)("div",Ke,[(0,i.Lk)("div",et,[t[10]||(t[10]=(0,i.Lk)("h3",null,"裁剪形状",-1)),(0,i.bF)(d,{modelValue:s.cropOptions.shape,"onUpdate:modelValue":t[0]||(t[0]=e=>s.cropOptions.shape=e),onChange:o.changeShape},{default:(0,i.k6)(()=>[(0,i.bF)(c,{label:"rect"},{default:(0,i.k6)(()=>t[7]||(t[7]=[(0,i.eW)("自由")])),_:1,__:[7]}),(0,i.bF)(c,{label:"square"},{default:(0,i.k6)(()=>t[8]||(t[8]=[(0,i.eW)("正方形")])),_:1,__:[8]}),(0,i.bF)(c,{label:"circle"},{default:(0,i.k6)(()=>t[9]||(t[9]=[(0,i.eW)("圆形")])),_:1,__:[9]})]),_:1},8,["modelValue","onChange"])]),"circle"!==s.cropOptions.shape?((0,i.uX)(),(0,i.CE)("div",tt,[t[15]||(t[15]=(0,i.Lk)("h3",null,"裁剪比例",-1)),(0,i.bF)(d,{modelValue:s.cropOptions.ratio,"onUpdate:modelValue":t[1]||(t[1]=e=>s.cropOptions.ratio=e),onChange:o.changeRatio},{default:(0,i.k6)(()=>[(0,i.bF)(c,{label:"free"},{default:(0,i.k6)(()=>t[11]||(t[11]=[(0,i.eW)("自由")])),_:1,__:[11]}),(0,i.bF)(c,{label:"1:1"},{default:(0,i.k6)(()=>t[12]||(t[12]=[(0,i.eW)("1:1")])),_:1,__:[12]}),(0,i.bF)(c,{label:"4:3"},{default:(0,i.k6)(()=>t[13]||(t[13]=[(0,i.eW)("4:3")])),_:1,__:[13]}),(0,i.bF)(c,{label:"16:9"},{default:(0,i.k6)(()=>t[14]||(t[14]=[(0,i.eW)("16:9")])),_:1,__:[14]})]),_:1},8,["modelValue","onChange"]),"free"!==s.cropOptions.ratio?((0,i.uX)(),(0,i.CE)("div",lt,[(0,i.Lk)("div",{class:"ratio-box",style:(0,S.Tr)(o.getRatioStyle())},null,4)])):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0),(0,i.Lk)("div",at,[(0,i.bF)(u,{type:"primary",onClick:o.applyCrop,loading:s.isProcessing},{default:(0,i.k6)(()=>t[16]||(t[16]=[(0,i.eW)(" 应用裁剪 ")])),_:1,__:[16]},8,["onClick","loading"]),(0,i.bF)(u,{onClick:o.resetImage},{default:(0,i.k6)(()=>t[17]||(t[17]=[(0,i.eW)("重新上传")])),_:1,__:[17]},8,["onClick"]),(0,i.bF)(u,{onClick:t[2]||(t[2]=e=>o.rotateImage(-90))},{default:(0,i.k6)(()=>t[18]||(t[18]=[(0,i.eW)("向左旋转")])),_:1,__:[18]}),(0,i.bF)(u,{onClick:t[3]||(t[3]=e=>o.rotateImage(90))},{default:(0,i.k6)(()=>t[19]||(t[19]=[(0,i.eW)("向右旋转")])),_:1,__:[19]})])])])):(0,i.Q3)("",!0),s.resultUrl?((0,i.uX)(),(0,i.CE)("div",it,[t[23]||(t[23]=(0,i.Lk)("h2",null,"裁剪结果",-1)),(0,i.Lk)("div",st,[(0,i.Lk)("div",ot,[(0,i.Lk)("img",{src:s.resultUrl,alt:"裁剪结果"},null,8,nt)]),(0,i.Lk)("div",rt,[(0,i.bF)(u,{type:"success",onClick:o.downloadImage},{default:(0,i.k6)(()=>t[21]||(t[21]=[(0,i.eW)("下载图片")])),_:1,__:[21]},8,["onClick"]),(0,i.bF)(u,{onClick:o.resetResult},{default:(0,i.k6)(()=>t[22]||(t[22]=[(0,i.eW)("重新裁剪")])),_:1,__:[22]},8,["onClick"])])])])):(0,i.Q3)("",!0)])])}var dt=l(224),ut={name:"ImageCropping",components:{VueCropper:dt.EJ},data(){return{fileList:[],imageUrl:null,cropperData:{x:0,y:0,width:0,height:0},cropOptions:{outputType:"png",shape:"rect",ratio:"free",mode:"contain",autoCropWidth:200,autoCropHeight:200,fixed:!1,fixedNumber:[0,0],round:!1},resultUrl:null,isProcessing:!1}},methods:{beforeUpload(e){const t=e.type.startsWith("image/"),l=e.size/1024/1024<10;return t?!!l||(this.$message.error("图片大小不能超过10MB!"),!1):(this.$message.error("只能上传图片文件!"),!1)},handleFileChange(e){e&&e.raw&&(this.fileList=[e],this.imageUrl=URL.createObjectURL(e.raw),this.resultUrl=null)},changeShape(e){"circle"===e?(this.cropOptions.round=!0,this.cropOptions.fixed=!0,this.cropOptions.ratio="1:1",this.cropOptions.fixedNumber=[1,1]):"square"===e?(this.cropOptions.round=!1,this.cropOptions.fixed=!0,this.cropOptions.ratio="1:1",this.cropOptions.fixedNumber=[1,1]):(this.cropOptions.round=!1,this.cropOptions.fixed=!1,this.cropOptions.ratio="free",this.cropOptions.fixedNumber=[0,0]),this.$nextTick(()=>{if(this.$refs.cropper&&(this.$refs.cropper.refresh(),"circle"===e)){const e=this.$refs.cropper.cropW,t=Math.min(e,this.$refs.cropper.cropH);this.$refs.cropper.cropW=t,this.$refs.cropper.cropH=t}})},changeRatio(e){switch(e){case"1:1":this.cropOptions.fixedNumber=[1,1],this.cropOptions.fixed=!0;break;case"4:3":this.cropOptions.fixedNumber=[4,3],this.cropOptions.fixed=!0;break;case"16:9":this.cropOptions.fixedNumber=[16,9],this.cropOptions.fixed=!0;break;default:this.cropOptions.fixedNumber=[0,0],this.cropOptions.fixed=!1}this.$nextTick(()=>{this.$refs.cropper&&this.$refs.cropper.refresh()})},realTime(e){this.cropperData=e},rotateImage(e){this.$refs.cropper.rotateRight(e)},resetImage(){this.imageUrl=null,this.fileList=[],this.resultUrl=null,this.cropperData={x:0,y:0,width:0,height:0}},resetResult(){this.resultUrl=null},async applyCrop(){if(this.imageUrl&&this.$refs.cropper)try{this.isProcessing=!0,this.$refs.cropper.getCropData(async e=>{const t=this.dataURLtoBlob(e),l=new File([t],"cropped.png",{type:"image/png"}),a=new FormData;a.append("image",l),a.append("round",this.cropOptions.round.toString());try{const e=await fetch("/api/image/crop",{method:"POST",body:a}).then(e=>e.json());e.success?(this.resultUrl=e.url,this.$message.success("裁剪成功!")):this.$message.error("裁剪失败: "+e.message)}catch(i){console.error("裁剪出错:",i),this.$message.error("裁剪失败: "+(i.message||"未知错误"))}finally{this.isProcessing=!1}})}catch(e){console.error("获取裁剪数据失败:",e),this.$message.error("获取裁剪数据失败: "+(e.message||"未知错误")),this.isProcessing=!1}else this.$message.warning("请先上传图片")},downloadImage(){if(!this.resultUrl)return void this.$message.warning("没有可下载的图片");const e=document.createElement("a");e.href=this.resultUrl,e.download="cropped_image.png",document.body.appendChild(e),e.click(),document.body.removeChild(e)},dataURLtoBlob(e){const t=e.split(","),l=t[0].match(/:(.*?);/)[1],a=atob(t[1]);let i=a.length;const s=new Uint8Array(i);while(i--)s[i]=a.charCodeAt(i);return new Blob([s],{type:l})},getRatioStyle(){let e=100,t=100;switch(this.cropOptions.ratio){case"1:1":e=60,t=60;break;case"4:3":e=80,t=60;break;case"16:9":e=80,t=45;break}return{width:e+"px",height:t+"px"}}}};const pt=(0,F.A)(ut,[["render",ct],["__scopeId","data-v-507b9264"]]);var mt=pt;const gt={class:"tool-page bilibili-style"},ht={class:"tool-container"},kt={class:"upload-section"},bt={key:0,class:"uploaded-list"},ft={class:"thumbnail-container"},vt={class:"thumbnail"},wt=["src","alt"],_t={class:"thumbnail-info"},Lt={class:"thumbnail-name"},It={class:"thumbnail-size"},Ft={key:1,class:"settings-section"},Ct={class:"setting-group"},yt={key:0,class:"setting-group"},St={class:"action-buttons"},Ut={key:2,class:"result-section"},Pt={class:"result-file-info"},Wt={class:"result-thumbnail"},xt=["src","alt"],Rt={class:"file-meta"},Mt={class:"result-file-info"},Gt={class:"result-thumbnail"},Zt=["src","alt"],Dt={class:"file-meta"},Ot={key:0,class:"batch-actions"};function At(e,t,l,a,s,o){const n=(0,i.g2)("el-upload"),r=(0,i.g2)("el-radio"),c=(0,i.g2)("el-radio-group"),d=(0,i.g2)("el-slider"),u=(0,i.g2)("el-button"),p=(0,i.g2)("el-table-column"),m=(0,i.g2)("el-table");return(0,i.uX)(),(0,i.CE)("div",gt,[t[24]||(t[24]=(0,i.Lk)("div",{class:"tool-header"},[(0,i.Lk)("h1",null,"图片格式转换"),(0,i.Lk)("p",null,"轻松在JPG、PNG、WebP等格式间转换您的图片")],-1)),(0,i.Lk)("div",ht,[(0,i.Lk)("div",kt,[(0,i.bF)(n,{class:"upload-area",drag:"",action:"#","auto-upload":!1,"on-change":o.handleFileChange,"before-upload":o.beforeUpload,"on-remove":o.handleRemove,"file-list":s.fileList,multiple:"",limit:10},{tip:(0,i.k6)(()=>t[3]||(t[3]=[(0,i.Lk)("div",{class:"el-upload__tip"}," 支持JPG、PNG、WebP、GIF格式，单个文件不超过10MB ",-1)])),default:(0,i.k6)(()=>[t[4]||(t[4]=(0,i.Lk)("i",{class:"el-icon-upload"},null,-1)),t[5]||(t[5]=(0,i.Lk)("div",{class:"el-upload__text"},[(0,i.eW)("拖拽图片到此区域，或 "),(0,i.Lk)("em",null,"点击上传")],-1))]),_:1,__:[4,5]},8,["on-change","before-upload","on-remove","file-list"])]),s.fileList.length>0?((0,i.uX)(),(0,i.CE)("div",bt,[t[6]||(t[6]=(0,i.Lk)("h2",null,"已上传图片",-1)),(0,i.Lk)("div",ft,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.fileList,(e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"thumbnail-item"},[(0,i.Lk)("div",vt,[(0,i.Lk)("img",{src:o.getFileUrl(e),alt:e.name},null,8,wt)]),(0,i.Lk)("div",_t,[(0,i.Lk)("p",Lt,(0,S.v_)(o.getFileName(e.name)),1),(0,i.Lk)("p",It,(0,S.v_)(o.formatFileSize(e.size)),1)])]))),128))])])):(0,i.Q3)("",!0),s.fileList.length>0?((0,i.uX)(),(0,i.CE)("div",Ft,[t[18]||(t[18]=(0,i.Lk)("h2",null,"转换设置",-1)),(0,i.Lk)("div",Ct,[t[11]||(t[11]=(0,i.Lk)("label",null,"选择目标格式",-1)),(0,i.bF)(c,{modelValue:s.convertSettings.format,"onUpdate:modelValue":t[0]||(t[0]=e=>s.convertSettings.format=e)},{default:(0,i.k6)(()=>[(0,i.bF)(r,{label:"jpeg"},{default:(0,i.k6)(()=>t[7]||(t[7]=[(0,i.eW)("JPG")])),_:1,__:[7]}),(0,i.bF)(r,{label:"png"},{default:(0,i.k6)(()=>t[8]||(t[8]=[(0,i.eW)("PNG")])),_:1,__:[8]}),(0,i.bF)(r,{label:"webp"},{default:(0,i.k6)(()=>t[9]||(t[9]=[(0,i.eW)("WebP")])),_:1,__:[9]}),(0,i.bF)(r,{label:"gif"},{default:(0,i.k6)(()=>t[10]||(t[10]=[(0,i.eW)("GIF")])),_:1,__:[10]})]),_:1},8,["modelValue"])]),"gif"!==s.convertSettings.format?((0,i.uX)(),(0,i.CE)("div",yt,[t[15]||(t[15]=(0,i.Lk)("label",null,"质量设置",-1)),(0,i.bF)(c,{modelValue:s.convertSettings.quality,"onUpdate:modelValue":t[1]||(t[1]=e=>s.convertSettings.quality=e)},{default:(0,i.k6)(()=>[(0,i.bF)(r,{label:30},{default:(0,i.k6)(()=>t[12]||(t[12]=[(0,i.eW)("低 (小文件)")])),_:1,__:[12]}),(0,i.bF)(r,{label:70},{default:(0,i.k6)(()=>t[13]||(t[13]=[(0,i.eW)("中 (平衡)")])),_:1,__:[13]}),(0,i.bF)(r,{label:90},{default:(0,i.k6)(()=>t[14]||(t[14]=[(0,i.eW)("高 (高质量)")])),_:1,__:[14]})]),_:1},8,["modelValue"]),(0,i.bF)(d,{modelValue:s.convertSettings.quality,"onUpdate:modelValue":t[2]||(t[2]=e=>s.convertSettings.quality=e),min:10,max:100,step:5,"format-tooltip":o.formatQuality,"show-stops":"",class:"quality-slider"},null,8,["modelValue","format-tooltip"])])):(0,i.Q3)("",!0),(0,i.Lk)("div",St,[(0,i.bF)(u,{type:"primary",onClick:o.startConversion,disabled:0===s.fileList.length||s.isProcessing,loading:s.isProcessing},{default:(0,i.k6)(()=>t[16]||(t[16]=[(0,i.eW)(" 开始转换 ")])),_:1,__:[16]},8,["onClick","disabled","loading"]),(0,i.bF)(u,{onClick:o.resetAll},{default:(0,i.k6)(()=>t[17]||(t[17]=[(0,i.eW)("重置")])),_:1,__:[17]},8,["onClick"])])])):(0,i.Q3)("",!0),s.conversionResults.length>0?((0,i.uX)(),(0,i.CE)("div",Ut,[t[23]||(t[23]=(0,i.Lk)("h2",null,"转换结果",-1)),(0,i.bF)(m,{data:s.conversionResults,style:{width:"100%"},border:""},{default:(0,i.k6)(()=>[(0,i.bF)(p,{label:"原始文件"},{default:(0,i.k6)(e=>[(0,i.Lk)("div",Pt,[(0,i.Lk)("div",Wt,[(0,i.Lk)("img",{src:e.row.originalUrl,alt:e.row.fileName},null,8,xt)]),(0,i.Lk)("div",null,[(0,i.Lk)("p",null,(0,S.v_)(e.row.fileName),1),(0,i.Lk)("p",Rt,(0,S.v_)(e.row.originalSize),1)])])]),_:1}),(0,i.bF)(p,{label:"转换结果"},{default:(0,i.k6)(e=>[(0,i.Lk)("div",Mt,[(0,i.Lk)("div",Gt,[(0,i.Lk)("img",{src:e.row.convertedUrl,alt:e.row.fileName},null,8,Zt)]),(0,i.Lk)("div",null,[(0,i.Lk)("p",null,(0,S.v_)(o.getConvertedFileName(e.row)),1),(0,i.Lk)("p",Dt,(0,S.v_)(e.row.convertedFormat.toUpperCase())+" | "+(0,S.v_)(e.row.convertedSize),1)])])]),_:1}),(0,i.bF)(p,{label:"操作",width:"150"},{default:(0,i.k6)(e=>[(0,i.bF)(u,{type:"primary",size:"small",onClick:t=>o.downloadFile(e.row)},{default:(0,i.k6)(()=>t[19]||(t[19]=[(0,i.eW)(" 下载 ")])),_:2,__:[19]},1032,["onClick"]),(0,i.bF)(u,{type:"danger",size:"small",onClick:t=>o.removeResult(e.$index)},{default:(0,i.k6)(()=>t[20]||(t[20]=[(0,i.eW)(" 删除 ")])),_:2,__:[20]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),s.conversionResults.length>1?((0,i.uX)(),(0,i.CE)("div",Ot,[(0,i.bF)(u,{type:"success",onClick:o.downloadAllFiles},{default:(0,i.k6)(()=>t[21]||(t[21]=[(0,i.eW)("下载全部")])),_:1,__:[21]},8,["onClick"]),(0,i.bF)(u,{type:"danger",onClick:o.clearAllResults},{default:(0,i.k6)(()=>t[22]||(t[22]=[(0,i.eW)("清空结果")])),_:1,__:[22]},8,["onClick"])])):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0)])])}var Vt={name:"ImageConversion",data(){return{fileList:[],convertSettings:{format:"jpeg",quality:70},conversionResults:[],isProcessing:!1}},methods:{formatQuality(e){return`${e}%`},getFileUrl(e){return e.url||(e.raw?URL.createObjectURL(e.raw):"")},getFileName(e){return e?e.length>15?e.substring(0,12)+"...":e:""},formatFileSize(e){if(!e)return"0 B";const t=1024,l=["B","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(2))+" "+l[a]},getConvertedFileName(e){const t=e.fileName,l=e.convertedFormat,a=t.substring(t.lastIndexOf("."));return t.replace(a,"."+l)},handleFileChange(e,t){t?this.fileList=t:e&&this.fileList.push(e),console.log("文件列表已更新",this.fileList)},beforeUpload(e){const t=e.type.startsWith("image/"),l=e.size/1024/1024<10;return t?!!l||(this.$message.error("图片大小不能超过10MB!"),!1):(this.$message.error("只能上传图片文件!"),!1)},handleUpload({file:e}){const t=URL.createObjectURL(e);return console.log("文件已预览",e.name,t),Promise.resolve()},handleRemove(e,t){this.fileList=t},async startConversion(){if(0===this.fileList.length)return void this.$message.warning("请先上传图片");this.isProcessing=!0;const e=this.fileList.length;let t=0;for(const a of this.fileList){try{const l=new FormData;l.append("image",a.raw),l.append("format",this.convertSettings.format),l.append("quality",this.convertSettings.quality),this.$message.info(`正在处理 ${a.name} (${t+1}/${e})...`);const i=await fetch("/api/image/convert",{method:"POST",body:l}).then(e=>e.json());i.success?this.conversionResults.push({fileName:a.name,originalSize:this.formatFileSize(a.size),originalUrl:URL.createObjectURL(a.raw),convertedUrl:i.url,convertedFormat:this.convertSettings.format,convertedSize:"处理中...",downloadUrl:i.url}):this.$message.error(`处理 ${a.name} 失败: ${i.message}`)}catch(l){console.error("转换出错:",l),this.$message.error(`处理 ${a.name} 失败: ${l.message||"未知错误"}`)}t++}t>0&&this.$message.success(`成功转换 ${t} 个文件`),this.isProcessing=!1},resetAll(){this.fileList=[],this.convertSettings={format:"jpeg",quality:70}},downloadFile(e){const t=document.createElement("a");t.href=e.downloadUrl,t.download=this.getConvertedFileName(e),document.body.appendChild(t),t.click(),document.body.removeChild(t)},downloadAllFiles(){0!==this.conversionResults.length?(this.conversionResults.forEach(e=>{setTimeout(()=>{this.downloadFile(e)},100)}),this.$message.success("正在下载全部文件...")):this.$message.warning("没有可下载的文件")},removeResult(e){this.conversionResults.splice(e,1)},clearAllResults(){this.conversionResults=[]}}};const zt=(0,F.A)(Vt,[["render",At],["__scopeId","data-v-26b2b834"]]);var $t=zt;const Nt={class:"tool-page"},Xt={class:"tool-container"},Et={class:"upload-section"},Tt={class:"settings-section"},Ht={class:"action-buttons"},Qt={key:0,class:"progress-section"},Bt={class:"status-text"},jt={key:1,class:"result-section"},Jt={class:"batch-actions"},qt={class:"tool-faq"};function Yt(e,t,l,a,s,o){const n=(0,i.g2)("el-upload"),r=(0,i.g2)("el-option"),c=(0,i.g2)("el-option-group"),d=(0,i.g2)("el-select"),u=(0,i.g2)("el-form-item"),p=(0,i.g2)("el-form"),m=(0,i.g2)("el-button"),g=(0,i.g2)("el-progress"),h=(0,i.g2)("el-table-column"),k=(0,i.g2)("el-tag"),b=(0,i.g2)("el-table"),f=(0,i.g2)("el-collapse-item"),v=(0,i.g2)("el-collapse");return(0,i.uX)(),(0,i.CE)("div",Nt,[t[17]||(t[17]=(0,i.Lk)("div",{class:"tool-header"},[(0,i.Lk)("h1",null,"文件转换"),(0,i.Lk)("p",null,"支持常见文档格式之间的转换，简单高效")],-1)),(0,i.Lk)("div",Xt,[(0,i.Lk)("div",Et,[(0,i.bF)(n,{class:"upload-area",drag:"",action:"/api/file/convert","on-preview":o.handlePreview,"on-remove":o.handleRemove,"before-upload":o.beforeUpload,"on-success":o.handleSuccess,"on-error":o.handleError,"file-list":s.fileList,"auto-upload":!1,"on-change":o.handleFileChange,"http-request":o.customUpload,ref:"upload"},{tip:(0,i.k6)(()=>t[1]||(t[1]=[(0,i.Lk)("div",{class:"el-upload__tip"}," 支持DOC、DOCX、PPT、PPTX、XLS、XLSX、PDF、TXT等常见格式，单个文件不超过20MB ",-1)])),default:(0,i.k6)(()=>[t[2]||(t[2]=(0,i.Lk)("i",{class:"el-icon-upload"},null,-1)),t[3]||(t[3]=(0,i.Lk)("div",{class:"el-upload__text"},[(0,i.eW)("拖拽文件到此处，或 "),(0,i.Lk)("em",null,"点击上传")],-1))]),_:1,__:[2,3]},8,["on-preview","on-remove","before-upload","on-success","on-error","file-list","on-change","http-request"])]),(0,i.Lk)("div",Tt,[t[6]||(t[6]=(0,i.Lk)("h2",null,"转换设置",-1)),(0,i.bF)(p,{"label-position":"top",model:s.conversionSettings},{default:(0,i.k6)(()=>[(0,i.bF)(u,{label:"目标格式"},{default:(0,i.k6)(()=>[(0,i.bF)(d,{modelValue:s.conversionSettings.targetFormat,"onUpdate:modelValue":t[0]||(t[0]=e=>s.conversionSettings.targetFormat=e),placeholder:"请选择目标格式"},{default:(0,i.k6)(()=>[(0,i.bF)(c,{label:"文档格式"},{default:(0,i.k6)(()=>[(0,i.bF)(r,{label:"PDF文档",value:"pdf"}),(0,i.bF)(r,{label:"Word文档(DOCX)",value:"docx"}),(0,i.bF)(r,{label:"纯文本(TXT)",value:"txt"})]),_:1}),(0,i.bF)(c,{label:"演示格式"},{default:(0,i.k6)(()=>[(0,i.bF)(r,{label:"PowerPoint(PPTX)",value:"pptx"}),(0,i.bF)(r,{label:"PDF演示",value:"pdf_presentation"})]),_:1}),(0,i.bF)(c,{label:"表格格式"},{default:(0,i.k6)(()=>[(0,i.bF)(r,{label:"Excel(XLSX)",value:"xlsx"}),(0,i.bF)(r,{label:"CSV表格",value:"csv"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),(0,i.Lk)("div",Ht,[(0,i.bF)(m,{type:"primary",onClick:o.startConversion,disabled:0===s.fileList.length||!s.conversionSettings.targetFormat},{default:(0,i.k6)(()=>t[4]||(t[4]=[(0,i.eW)(" 开始转换 ")])),_:1,__:[4]},8,["onClick","disabled"]),(0,i.bF)(m,{onClick:o.resetSettings},{default:(0,i.k6)(()=>t[5]||(t[5]=[(0,i.eW)("重置")])),_:1,__:[5]},8,["onClick"])])]),s.convertingFile?((0,i.uX)(),(0,i.CE)("div",Qt,[t[7]||(t[7]=(0,i.Lk)("h2",null,"转换进度",-1)),(0,i.bF)(g,{percentage:s.conversionProgress,status:s.conversionStatus},null,8,["percentage","status"]),(0,i.Lk)("div",Bt,(0,S.v_)(s.statusMessage),1)])):(0,i.Q3)("",!0),s.conversionResults.length>0?((0,i.uX)(),(0,i.CE)("div",jt,[t[12]||(t[12]=(0,i.Lk)("h2",null,"转换结果",-1)),(0,i.bF)(b,{data:s.conversionResults,style:{width:"100%"}},{default:(0,i.k6)(()=>[(0,i.bF)(h,{prop:"fileName",label:"文件名"}),(0,i.bF)(h,{prop:"originalFormat",label:"原始格式"}),(0,i.bF)(h,{prop:"targetFormat",label:"目标格式"}),(0,i.bF)(h,{prop:"status",label:"状态"},{default:(0,i.k6)(e=>[(0,i.bF)(k,{type:"completed"===e.row.status?"success":"warning"},{default:(0,i.k6)(()=>[(0,i.eW)((0,S.v_)("completed"===e.row.status?"转换完成":"转换中"),1)]),_:2},1032,["type"])]),_:1}),(0,i.bF)(h,{label:"操作"},{default:(0,i.k6)(e=>[(0,i.bF)(m,{type:"text",size:"small",onClick:t=>o.downloadFile(e.row),disabled:"completed"!==e.row.status},{default:(0,i.k6)(()=>t[8]||(t[8]=[(0,i.eW)(" 下载 ")])),_:2,__:[8]},1032,["onClick","disabled"]),(0,i.bF)(m,{type:"text",size:"small",onClick:t=>o.deleteResult(e.$index)},{default:(0,i.k6)(()=>t[9]||(t[9]=[(0,i.eW)(" 删除 ")])),_:2,__:[9]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),(0,i.Lk)("div",Jt,[(0,i.bF)(m,{type:"success",onClick:o.downloadAll,disabled:!o.hasCompletedResults},{default:(0,i.k6)(()=>t[10]||(t[10]=[(0,i.eW)("下载全部")])),_:1,__:[10]},8,["onClick","disabled"]),(0,i.bF)(m,{type:"danger",onClick:o.clearResults},{default:(0,i.k6)(()=>t[11]||(t[11]=[(0,i.eW)("清空结果")])),_:1,__:[11]},8,["onClick"])])])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",qt,[t[16]||(t[16]=(0,i.Lk)("h2",null,"常见问题",-1)),(0,i.bF)(v,null,{default:(0,i.k6)(()=>[(0,i.bF)(f,{title:"支持哪些文件格式转换？",name:"1"},{default:(0,i.k6)(()=>t[13]||(t[13]=[(0,i.Lk)("p",null," 目前支持的文档格式有：DOC、DOCX、PPT、PPTX、XLS、XLSX、PDF、TXT等常见格式之间的互相转换。 我们持续更新支持的格式，如有特殊需求，请通过反馈渠道告诉我们。 ",-1)])),_:1,__:[13]}),(0,i.bF)(f,{title:"文件转换后会影响质量吗？",name:"2"},{default:(0,i.k6)(()=>t[14]||(t[14]=[(0,i.Lk)("p",null," 不同格式之间的转换可能会导致一些格式细节的丢失，特别是复杂的排版和特殊效果。 我们使用专业的转换引擎，尽可能保留原始文件的布局和格式，但无法保证100%一致。 ",-1)])),_:1,__:[14]}),(0,i.bF)(f,{title:"文件转换需要多长时间？",name:"3"},{default:(0,i.k6)(()=>t[15]||(t[15]=[(0,i.Lk)("p",null," 转换时间取决于文件大小、复杂度和服务器负载。 一般情况下，小型文档（几MB）的转换通常在几秒到几十秒内完成。 大型或复杂的文档可能需要更长时间。 ",-1)])),_:1,__:[15]})]),_:1})])])}var Kt={name:"FileConversion",data(){return{fileList:[],conversionSettings:{targetFormat:""},convertingFile:!1,conversionProgress:0,conversionStatus:"",statusMessage:"",conversionResults:[],pollingInterval:null}},computed:{hasCompletedResults(){return this.conversionResults.some(e=>"completed"===e.status)}},methods:{handleRemove(e,t){this.fileList=t},handlePreview(e){console.log("预览文件",e)},handleFileChange(e,t){this.fileList=t},beforeUpload(e){const t=this.checkFileType(e),l=e.size/1024/1024<20;return t?!!l||(this.$message.error("文件大小不能超过 20MB!"),!1):(this.$message.error("不支持的文件格式!"),!1)},checkFileType(e){const t=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/plain"];return t.includes(e.type)},getFileExtension(e){return e.split(".").pop().toLowerCase()},handleSuccess(e,t){this.$message.success("文件上传成功!"),this.startPollingStatus(e.taskId,t)},handleError(){this.$message.error("上传失败，请重试!"),this.convertingFile=!1},startConversion(){0!==this.fileList.length&&this.conversionSettings.targetFormat?(this.convertingFile=!0,this.conversionProgress=0,this.conversionStatus="",this.statusMessage="准备转换...",this.$refs.upload.submit()):this.$message.warning("请选择文件和目标格式!")},customUpload(e){const{file:t,onSuccess:l,onError:a,onProgress:i}=e,s=new FormData;s.append("file",t),s.append("targetFormat",this.conversionSettings.targetFormat),ue().post("/api/file/convert",s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{const t=Math.round(100*e.loaded/e.total);i({percent:t})}}).then(e=>{l(e.data)}).catch(e=>{console.error("上传失败:",e),a(e)})},startPollingStatus(e,t){this.conversionResults.unshift({taskId:e,fileName:t.name,originalFormat:this.getFileExtension(t.name),targetFormat:this.conversionSettings.targetFormat,status:"processing",downloadUrl:""}),this.pollingInterval=setInterval(()=>{this.checkConversionStatus(e)},1e3)},checkConversionStatus(e){ue().get(`/api/file/status/${e}`).then(t=>{const l=t.data,a=this.conversionResults.findIndex(t=>t.taskId===e);-1!==a&&(this.conversionProgress=l.progress,this.statusMessage=l.message||"转换中...","completed"===l.status?(this.conversionResults[a].status="completed",this.conversionResults[a].downloadUrl=l.downloadUrl,clearInterval(this.pollingInterval),this.$message.success("文件转换完成!"),this.convertingFile=!1,this.conversionStatus="success"):"failed"===l.status&&(this.conversionResults[a].status="failed",clearInterval(this.pollingInterval),this.$message.error("文件转换失败: "+(l.error||"未知错误")),this.convertingFile=!1,this.conversionStatus="exception"))}).catch(e=>{console.error("获取转换状态失败",e)})},resetSettings(){this.conversionSettings={targetFormat:""},this.fileList=[],this.$refs.upload.clearFiles()},downloadFile(e){if("completed"===e.status&&e.downloadUrl){const t=document.createElement("a");t.href=e.downloadUrl,t.download=`converted_${e.fileName.split(".")[0]}.${e.targetFormat}`,t.click()}},deleteResult(e){this.conversionResults.splice(e,1)},downloadAll(){const e=this.conversionResults.filter(e=>"completed"===e.status);e.forEach(e=>{this.downloadFile(e)})},clearResults(){this.conversionResults=[]}},beforeDestroy(){this.pollingInterval&&clearInterval(this.pollingInterval)}};const el=(0,F.A)(Kt,[["render",Yt],["__scopeId","data-v-82a4ebb4"]]);var tl=el;const ll=[{path:"/",name:"home",component:J,meta:{title:"在线工具 - 首页"}},{path:"/image-compression",name:"image-compression",component:ge,meta:{title:"在线工具 - 图片压缩"}},{path:"/image-watermark",name:"image-watermark",component:Qe,meta:{title:"在线工具 - 图片水印"}},{path:"/image-cropping",name:"image-cropping",component:mt,meta:{title:"在线工具 - 图片剪裁"}},{path:"/image-conversion",name:"image-conversion",component:$t,meta:{title:"在线工具 - 图片格式转换"}},{path:"/file-conversion",name:"file-conversion",component:tl,meta:{title:"在线工具 - 文件转换"}}],al=(0,A.aE)({history:(0,A.LA)(),routes:ll});al.beforeEach((e,t,l)=>{document.title=e.meta.title||"在线工具",l()});var il=al,sl=l(359);l(188);const ol=(0,a.Ef)(O);ol.use(il),ol.use(sl.A),ol.mount("#app")}},t={};function l(a){var i=t[a];if(void 0!==i)return i.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,l),s.exports}l.m=e,function(){var e=[];l.O=function(t,a,i,s){if(!a){var o=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],s=e[d][2];for(var n=!0,r=0;r<a.length;r++)(!1&s||o>=s)&&Object.keys(l.O).every(function(e){return l.O[e](a[r])})?a.splice(r--,1):(n=!1,s<o&&(o=s));if(n){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[a,i,s]}}(),function(){l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,{a:t}),t}}(),function(){l.d=function(e,t){for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};l.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,s,o=a[0],n=a[1],r=a[2],c=0;if(o.some(function(t){return 0!==e[t]})){for(i in n)l.o(n,i)&&(l.m[i]=n[i]);if(r)var d=r(l)}for(t&&t(a);c<o.length;c++)s=o[c],l.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return l.O(d)},a=self["webpackChunkclient"]=self["webpackChunkclient"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=l.O(void 0,[504],function(){return l(778)});a=l.O(a)})();
//# sourceMappingURL=app.48f29adf.js.map